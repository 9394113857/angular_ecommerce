<app-loading
  [isLoading]="isLoading"
  loadingText="Loading products...">
</app-loading>

<div class="seller-home" *ngIf="!isLoading">

  <h2>My Products</h2>

  <table *ngIf="productList.length > 0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Price</th>
        <th>Variants (Color → Stock)</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let product of productList">
        <td>#{{ product.id }}</td>
        <td>{{ product.name }}</td>
        <td>₹ {{ product.price }}</td>
        <td>
          <div *ngIf="product.variants?.length; else noVariants">
            <div *ngFor="let v of product.variants" class="variant-row">
              <span>{{ v.color }}</span>
              <span [class.out]="v.stock === 0">
                {{ v.stock > 0 ? v.stock : 'Out of stock' }}
              </span>
            </div>
          </div>
          <ng-template #noVariants>
            <span>No variants</span>
          </ng-template>
        </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="productList.length === 0">
    No products found.
  </p>

</div>

<div *ngIf="isLoading">
  <p>Loading product...</p>
</div>

<div *ngIf="!isLoading && product" class="product-details">

  <h1>{{ product.name }}</h1>

  <img
    [src]="product.image || 'https://via.placeholder.com/400'"
    alt="Product image"
  />

  <p class="price">â‚¹ {{ product.price }}</p>

  <p *ngIf="product.description">
    {{ product.description }}
  </p>

  <!-- ==========================
       VARIANT DROPDOWN
  =========================== -->
  <div *ngIf="!isSeller && product.variants?.length">
    <label><b>Color:</b></label>

    <select
      [(ngModel)]="selectedVariant"
      (ngModelChange)="onVariantChange($event)"
    >
      <option
        *ngFor="let v of product.variants"
        [ngValue]="v"
      >
        {{ v.color }} ({{ v.stock }} left)
      </option>
    </select>
  </div>

  <!-- ==========================
       STOCK DISPLAY
  =========================== -->
  <p *ngIf="!isSeller">
    <b>Stock:</b>
    <span [style.color]="selectedStock === 0 ? 'red' : 'green'">
      {{ selectedStock > 0 ? selectedStock + ' available' : 'Out of stock' }}
    </span>
  </p>

  <!-- ==========================
       QUANTITY
  =========================== -->
  <div *ngIf="!isSeller" class="quantity-controls">
    <button (click)="decreaseQty()">-</button>
    <span>{{ quantity }}</span>
    <button (click)="increaseQty()">+</button>
  </div>

  <!-- ==========================
       ACTIONS
  =========================== -->
  <div *ngIf="!isSeller">
    <button
      class="form-button"
      (click)="addToCart()"
      [disabled]="selectedStock === 0"
    >
      Add to Cart
    </button>
  </div>

  <div *ngIf="isSeller">
    <button class="form-button" (click)="editProduct()">
      Edit Product
    </button>
  </div>

</div>
